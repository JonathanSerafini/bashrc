
#
# SSH : Ensure agent socket gets created within ~/.ssh/agent
#

if ! bashrc.is_osx
then 
  SSH_AUTH_SOCK=~/.ssh/agent/socket
  export SSH_AUTH_SOCK

  if [ ! -d ~/.ssh/agent ]
  then mkdir -p ~/.ssh/agent
  fi

  if [ ! -f ~/.ssh/config ]
  then touch ~/.ssh/config
  fi

  if [ ! -S $SSH_AUTH_SOCK ]
  then ssh-agent -a $SSH_AUTH_SOCK &> /dev/null
  fi
fi

if [ ! -d ~/.ssh/tmp ]
then mkdir -p ~/.ssh/tmp
fi

chmod -R 0700 ~/.ssh

